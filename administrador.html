<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Administrador - EDEC</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body { visibility: hidden; }
    </style>
</head>
<body class="administrador-page">
    <script>
        // Verificaci칩n inmediata antes de renderizar contenido
        (function() {
            const isLoggedIn = localStorage.getItem('isLoggedInAdmin');
            const correoUsuario = localStorage.getItem('adminCorreo');
            
            if (isLoggedIn !== 'true' || !correoUsuario) {
                window.location.replace('administradorlogin.html');
                return;
            }
            
            // Verificaci칩n r치pida del rol (la verificaci칩n completa se hace en authGuard)
            const rolGuardado = localStorage.getItem('adminRol');
            if (rolGuardado !== 'administrador') {
                localStorage.removeItem('isLoggedInAdmin');
                localStorage.removeItem('adminCorreo');
                localStorage.removeItem('adminRol');
                localStorage.removeItem('adminContrase침a');
                window.location.replace('administradorlogin.html');
                return;
            }
            
            document.body.style.visibility = 'visible';
        })();
    </script>
    <!-- Botones superiores derechos -->
    <div class="admin-header-buttons">
        <button class="btn-crear-usuario" id="btnCrearUsuario">Crear Usuario</button>
        <button class="btn-usuario-circular" id="btnUsuarioCircular">U</button>
        <button class="btn-cerrar-sesion-admin" id="btnCerrarSesion">Cerrar Sesi칩n</button>
    </div>

    <div class="administrador-container">
        <h1>Dashboard Administrador</h1>
        
        <div class="dashboard-buttons">
            <button class="btn-dashboard" id="btnBuscador" data-url="buscador.html">
                <span class="btn-icon">游댌</span>
                <span class="btn-text">Buscador de Alumnos</span>
            </button>
            <button class="btn-dashboard" id="btnAsistencias" data-url="asistencias.html">
                <span class="btn-icon">游늶</span>
                <span class="btn-text">Asistencias</span>
            </button>
            <button class="btn-dashboard" id="btnRegistrador" data-url="home.html">
                <span class="btn-icon">游닇</span>
                <span class="btn-text">Registrador de Asistencia</span>
            </button>
        </div>
    </div>

    <!-- Modal para crear usuario -->
    <div class="modal-overlay" id="modalCrearUsuario" style="display: none;">
        <div class="modal-content">
            <button class="btn-cerrar-modal" id="btnCerrarCrearUsuario">칑</button>
            <h2>Crear Nuevo Usuario</h2>
            <form id="formCrearUsuario">
                <div class="input-group">
                    <label for="nombreCompleto">Nombre Completo:</label>
                    <input type="text" id="nombreCompleto" name="nombreCompleto" required>
                </div>
                <div class="input-group">
                    <label for="correoCrear">Correo:</label>
                    <input type="email" id="correoCrear" name="correoCrear" required>
                </div>
                <div class="input-group">
                    <label for="contrase침aCrear">Contrase침a:</label>
                    <input type="password" id="contrase침aCrear" name="contrase침aCrear" required>
                </div>
                <div class="input-group">
                    <label for="rolCrear">Rol:</label>
                    <select id="rolCrear" name="rolCrear" required>
                        <option value="">Seleccione un rol</option>
                        <option value="administrador">Administrador</option>
                        <option value="director">Director</option>
                        <option value="coordinador">Coordinador</option>
                        <option value="maestro">Maestro</option>
                        <option value="alumno">Alumno</option>
                        <option value="servicio social">Servicio Social</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="campusCrear">Campus:</label>
                    <select id="campusCrear" name="campusCrear" required>
                        <option value="">Seleccione un campus</option>
                        <option value="apodaca">Apodaca</option>
                        <option value="miguel aleman">Miguel Alem치n</option>
                        <option value="eloy cavazos">Eloy Cavazos</option>
                    </select>
                </div>
                <p id="error-message-crear" class="error-text" style="display: none;"></p>
                <p id="success-message-crear" class="success-text" style="display: none;"></p>
                <div class="modal-buttons">
                    <button type="submit" class="btn-modal-submit">Crear Usuario</button>
                    <button type="button" class="btn-modal-cancel" id="btnCancelarCrearUsuario">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para informaci칩n del usuario -->
    <div class="modal-overlay" id="modalInfoUsuario" style="display: none;">
        <div class="modal-content">
            <button class="btn-cerrar-modal" id="btnCerrarInfoUsuario">칑</button>
            <h2>Informaci칩n del Usuario</h2>
            <div id="infoUsuarioContent">
                <p>Cargando informaci칩n...</p>
            </div>
            <div class="modal-buttons">
                <button type="button" class="btn-modal-submit" id="btnCambiarContrase침a">Cambiar Contrase침a</button>
                <button type="button" class="btn-modal-cancel" id="btnCerrarInfoUsuario2">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Modal para cambiar contrase침a -->
    <div class="modal-overlay" id="modalCambiarContrase침a" style="display: none;">
        <div class="modal-content">
            <button class="btn-cerrar-modal" id="btnCerrarCambiarContrase침a">칑</button>
            <h2>Cambiar Contrase침a</h2>
            <form id="formCambiarContrase침a">
                <div class="input-group">
                    <label for="contrase침aActual">Contrase침a Actual:</label>
                    <input type="password" id="contrase침aActual" name="contrase침aActual" required>
                </div>
                <div class="input-group">
                    <label for="nuevaContrase침a">Nueva Contrase침a:</label>
                    <input type="password" id="nuevaContrase침a" name="nuevaContrase침a" required>
                </div>
                <div class="input-group">
                    <label for="confirmarContrase침a">Confirmar Nueva Contrase침a:</label>
                    <input type="password" id="confirmarContrase침a" name="confirmarContrase침a" required>
                </div>
                <p id="error-message-password" class="error-text" style="display: none;"></p>
                <p id="success-message-password" class="success-text" style="display: none;"></p>
                <div class="modal-buttons">
                    <button type="submit" class="btn-modal-submit">Cambiar Contrase침a</button>
                    <button type="button" class="btn-modal-cancel" id="btnCancelarCambiarContrase침a">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/authGuard_administrador.js"></script>
    <script src="js/administrador.js"></script>
</body>
</html>
